Q(x,y):-S(x,y).
Q(x,z):-Q(x,y) and not R(y,z).
?-Q(x,y).
/

